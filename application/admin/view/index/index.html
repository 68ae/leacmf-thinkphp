<extend name="public/base" />
<block name="body">
    <div class="layui-fluid">
        <div class="layui-row layui-col-space15">
            <div class="layui-col-md8">
                <div class="layui-card">
                    <div class="layui-card-header">版本信息</div>
                    <div class="layui-card-body layui-text" style="height: 185px">
                        <table class="layui-table">
                            <colgroup>
                                <col width="150">
                                <col>
                            </colgroup>
                            <tbody>
                                <tr>
                                    <td>服务器域名/IP</td>
                                    <td>
                                        {$sys_info.domain} [ {$sys_info.ip} ]
                                    </td>
                                </tr>
                                <tr>
                                    <td>服务器环境</td>
                                    <td>
                                        {$sys_info.web_server}H
                                    </td>
                                </tr>
                                <tr>
                                    <td>PHP</td>
                                    <td>
                                        {$Think.PHP_VERSION}
                                    </td>
                                </tr>
                                <tr>
                                    <td>MySQL</td>
                                    <td>{$sys_info.mysql_version}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="layui-col-md4">
                <div class="layui-card">
                    <div class="layui-card-header">待办事项</div>
                    <div class="layui-card-body">
                        <div class="layui-carousel layadmin-carousel layadmin-backlog">
                            <div carousel-item>
                                <ul class="layui-row layui-col-space10 layui-this">
                                    <li class="layui-col-xs6">
                                        <a lay-href="" class="layadmin-backlog-body">
                                            <h3>待审评论</h3>
                                            <p>
                                                <cite>66</cite>
                                            </p>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs6">
                                        <a lay-href="" class="layadmin-backlog-body">
                                            <h3>待审帖子</h3>
                                            <p>
                                                <cite>12</cite>
                                            </p>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs6">
                                        <a lay-href="" class="layadmin-backlog-body">
                                            <h3>待审商品</h3>
                                            <p>
                                                <cite>99</cite>
                                            </p>
                                        </a>
                                    </li>
                                    <li class="layui-col-xs6">
                                        <a lay-href="" class="layadmin-backlog-body">
                                            <h3>待发货</h3>
                                            <p>
                                                <cite>20</cite>
                                            </p>
                                        </a>
                                    </li>
                                </ul>
                                <ul class="layui-row layui-col-space10">
                                    <li class="layui-col-xs6">
                                        <a lay-href="" class="layadmin-backlog-body">
                                            <h3>待审友情链接</h3>
                                            <p>
                                                <cite style="color: #FF5722;">5</cite>
                                            </p>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-col-md8">
                <div class="layui-row layui-col-space15">
                    <div class="layui-col-md6">
                    </div>
                    <div class="layui-col-md12">
                        <div class="layui-card">
                            <div class="layui-card-header">数据概览</div>
                            <div class="layui-card-body">
                                <div class="layui-carousel layadmin-carousel layadmin-dataview" data-anim="fade" lay-filter="dataview">
                                    <div carousel-item id="LAY_dataview">
                                        <div><i class="layui-icon layui-icon-loading1 layadmin-loading"></i></div>
                                        <div></div>
                                        <div></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-col-md4">
                <div class="layui-card">
                    <div class="layui-card-header">实时报告</div>
                    <div class="layui-card-body layadmin-takerates">
                        <div class="layui-progress" lay-showPercent="yes">
                            <h3>活跃率（日同比 28% <span class="layui-edge layui-edge-top" lay-tips="增长" lay-offset="-15"></span>）</h3>
                            <div class="layui-progress-bar" lay-percent="65%"></div>
                        </div>
                        <div class="layui-progress" lay-showPercent="yes">
                            <h3>签到率（日同比 11% <span class="layui-edge layui-edge-bottom" lay-tips="下降" lay-offset="-15"></span>）</h3>
                            <div class="layui-progress-bar" lay-percent="32%"></div>
                        </div>
                    </div>
                </div>
                <div class="layui-card">
                    <div class="layui-card-header">实时监控</div>
                    <div class="layui-card-body layadmin-takerates">
                        <div class="layui-progress" lay-showPercent="yes" lay-filter="cpu">
                            <h3>CPU使用率</h3>
                            <div class="layui-progress-bar" lay-percent="0%"></div>
                        </div>
                        <div class="layui-progress" lay-showPercent="yes" lay-filter="mem">
                            <h3>内存占用率</h3>
                            <div class="layui-progress-bar layui-bg-red" lay-percent="0%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</block>
<block name="script">
    <script type="text/javascript">
    layui.use(['carousel', 'element'], function() {
        var carousel = layui.carousel,
            element = layui.element;
        $('.layadmin-carousel').each(function() {
            var othis = $(this);
            carousel.render({
                elem: this,
                width: '100%',
                arrow: 'none',
                interval: othis.data('interval'),
                autoplay: othis.data('autoplay') === true,
                trigger: 'hover',
                anim: othis.data('anim')
            });
        });

        //实时监控
        window.setInterval(function() {
            $.get("{:url('system')}", function(res) {
                if (res.code == 1) {
                    element.progress('cpu', res.data.cpu_usage);
                    element.progress('mem', res.data.mem_usage);
                }
            })
        }, 2000);
    });
    </script>
</block>